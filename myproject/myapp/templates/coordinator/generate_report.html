<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>


<style>
    /* Custom styles to match MMU Xplore branding */
    .btn-mmu {
        background-color: #00008b; /* Dark Blue */
        color: white;
        border-radius: 4px;
    }
    .btn-mmu:hover {
        background-color: #0000cd;
        color: white;
    }
    .text-primary {
        color: #00008b !important;
    }
    .custom-radio:checked {
        background-color: #00008b;
        border-color: #00008b;
    }
    .custom-check:checked {
        background-color: #00008b;
        border-color: #00008b;
    }
    /* Simple underline for links to match image */
    .text-decoration-underline {
        text-underline-offset: 3px;
    }
</style>


<body>

<!----------------------------------------------------------------------Navbar component-------------------------------------------------------------------------------------->
{% include 'components/coordinator_navbar.html' %}
<!--------------------------------------------------------------------------------------------------------------------------------------------------------------------->

<div class="container my-5" style="min-height: 70vh;">
    <h2 class="fw-bold mb-4">Select Report Type</h2>
    
    <div class="d-flex mb-5">
        <div class="form-check me-4">
            <input class="form-check-input custom-radio" type="radio" name="reportType" id="radioIndividual" checked onclick="toggleReportView('individual')">
            <label class="form-check-label fw-semibold" for="radioIndividual">Individual</label>
        </div>
        <div class="form-check">
            <input class="form-check-input custom-radio" type="radio" name="reportType" id="radioFaculty" onclick="toggleReportView('faculty')">
            <label class="form-check-label fw-semibold" for="radioFaculty">Faculty</label>
        </div>

        
    </div>

    
    

    <div id="viewIndividual">
        <form method="get">
        {% csrf_token %}
            <h4 class="fw-bold mb-3">Search by individual</h4>

            <div class="position-relative mb-4" style="max-width: 300px;">
                <input type="text"
                    name="q"
                    class="form-control form-control-sm pe-5 search-box"
                    placeholder="Search by Name or ID">
                <i class="bi bi-search position-absolute top-50 end-0 translate-middle-y me-3 text-muted"></i>
            </div>

        </form>

        <div class="table-responsive">
            <table class="table align-middle">
                <thead class="text-secondary small">
                    <tr>
                        <th>ID</th>
                        <th>Researcher Name</th>
                        <th>Faculty</th>
                        <th class="text-end">Select</th>
                    </tr>
                </thead>
                
                <tbody class="border-top-0">
                    {% for researcher in researchers %}
                    <tr>
                        <td class ="text-primary">{{researcher.researcher_id}}</td>
                        <td> {{researcher.user_id.fullname}}</td>
                        <td class="text-primary">Faculty of Informatics</td>
                        <td class="text-end align-middle">
                        <form method="POST" action="{% url 'generate_report' %}" class="d-inline">
                        {% csrf_token %}

                        <input type="hidden" name="researcher_id" value="{{ researcher.researcher_id }}">

                      
                        <button type="submit"name="generate" value="generate" class="btn btn-custom btn-reject btn-sm">
                            Generate Report
                        </button>
                        </form>

                    </td>
                        
                    </tr>
                    {% empty %}
                        <tr>
                         <td colspan="5" class="text-center py-4">No matching researcher found.</td>
                        </tr>
                    {% endfor %}

                    

                </tbody>
            </table>
        </div>
    </div>

    <div id="viewFaculty" style="display: none;">
        <form method="POST" action="{% url 'generate_report' %}">
        {% csrf_token %}
        <div class="mb-4">
            <h4 class="fw-bold mb-3">Select Faculty</h4>
            <select class="form-select form-select-sm" style="max-width: 250px;">
                <option selected>Faculty of Informatics</option>
            </select>
        </div>

        <div class="mb-4">
            <button type="submit" class="btn btn-mmu btn-sm px-4 py-2" name="faculty_gen" value="faculty_gen">Generate Report</button>
        </div>
    </div>
    </form>
</div>


<script>
    function toggleReportView(viewType) {
        const individual = document.getElementById('viewIndividual');
        const faculty = document.getElementById('viewFaculty');
        
        if (viewType === 'individual') {
            individual.style.display = 'block';
            faculty.style.display = 'none';
        } else {
            individual.style.display = 'none';
            faculty.style.display = 'block';
        }
    }
</script>




<!---------------------------------------------------------------Footer Component----------------------------------------------------------------------------------------->

 {% include 'components/footer.html' %}

<!--------------------------------------------------------------------------------------------------------------------------------------------------------------------->

    




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>

